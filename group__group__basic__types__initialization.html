<!-- SPDX-License-Identifier: MIT -->
<!-- Copyright (C) 2022 Xilinx, Inc. -->
<!-- Copyright (C) 2022-2024 Advanced Micro Devices, Inc. -->
<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AI Engine API User Guide: Basic Type Initialization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="tables.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow" style="height: 60px">
  <td id="projectlogo" style="vertical-align: middle; padding-left: 15px; padding-right: 30px"><img height="32" alt="Logo" src="amd-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">AI Engine API User Guide<span id="projectnumber">&#160;(AIE-API)           2025.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__group__basic__types__initialization.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Basic Type Initialization<div class="ingroups"><a class="el" href="group__group__basic__types.html">Basic Types</a></div></div></div>
</div><!--header-->
<div class="contents">
<h3><a class="anchor" id="autotoc_md4"></a>
Vector Initialization</h3>
<p>The contents of a vector are undefined when default constructed.</p>
<dl class="section warning"><dt>Warning</dt><dd>Operations with undefined input vectors may not produce an error during compilation, but may not work as expected.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> v;</div>
<div class="ttc" id="anamespaceaie_html_a43a139787b463ec1b70e6d1e25621808"><div class="ttname"><a href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::op_result_type_t</a></div><div class="ttdeci">typename op_result_helper&lt; T, Op &gt;::type op_result_type_t</div><div class="ttdef"><b>Definition</b> expr.hpp:349</div></div>
</div><!-- fragment --><p>The simplest way of initializing a vector is from another vector of the same type and size.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> v1;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> v2 = v1;</div>
</div><!-- fragment --><p>Or as the result of an operation.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> v = <a class="code hl_function" href="group__group__arithmetic.html#ga9617379444e0c56c89d2e46bf3de66df">aie::add</a>(v1, v2);</div>
<div class="ttc" id="agroup__group__arithmetic_html_ga9617379444e0c56c89d2e46bf3de66df"><div class="ttname"><a href="group__group__arithmetic.html#ga9617379444e0c56c89d2e46bf3de66df">aie::add</a></div><div class="ttdeci">auto add(const Vec1 &amp;v1, const Vec2 &amp;v2) -&gt; aie_dm_resource_remove_t&lt; Vec1 &gt;</div><div class="ttdoc">Returns a vector with the element-wise addition of the two input vectors.</div><div class="ttdef"><b>Definition</b> aie.hpp:3581</div></div>
</div><!-- fragment --><p>A vector can also be read from memory using the <a class="el" href="group__group__memory.html#ga1d143988d732069ef3c66dc6d2ae3ea9" title="Load a vector of Elems size whose elements have type T.">aie::load_v</a> operation or iterators. See <a class="el" href="group__group__memory.html">Memory</a> for more details.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> v = <a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::load_v&lt;16&gt;</a>(ptr);</div>
</div><!-- fragment --><p>Sections of a vector can be modified independently. It can be done in a per-element basis.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> v;</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; v.<a class="code hl_function" href="group__group__basic__types.html#a5266d10f7c5135b998bdf1d50a3ff29a">size</a>(); ++i)</div>
<div class="line">    v[i] = i; <span class="comment">// i-th element is updated</span></div>
<div class="ttc" id="agroup__group__basic__types_html_a5266d10f7c5135b998bdf1d50a3ff29a"><div class="ttname"><a href="group__group__basic__types.html#a5266d10f7c5135b998bdf1d50a3ff29a">aie::vector::size</a></div><div class="ttdeci">static constexpr unsigned size()</div><div class="ttdoc">Returns the number of elements in the vector.</div><div class="ttdef"><b>Definition</b> vector.hpp:102</div></div>
</div><!-- fragment --><p>Or by writing subvectors.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 8&gt;</a> v1;</div>
<div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 8&gt;</a> v2;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> v;</div>
<div class="line">v.<a class="code hl_function" href="group__group__basic__types.html#ae028cc0af431a23480d5799fbb4a2e12">insert</a>(0, v1); <span class="comment">// This updates elements 0-7</span></div>
<div class="line">v.<a class="code hl_function" href="group__group__basic__types.html#ae028cc0af431a23480d5799fbb4a2e12">insert</a>(1, v2); <span class="comment">// This updates elements 8-15</span></div>
<div class="ttc" id="agroup__group__basic__types_html_ae028cc0af431a23480d5799fbb4a2e12"><div class="ttname"><a href="group__group__basic__types.html#ae028cc0af431a23480d5799fbb4a2e12">aie::vector::insert</a></div><div class="ttdeci">vector &amp; insert(unsigned idx, const vector&lt; T, ElemsIn &gt; &amp;v)</div><div class="ttdoc">Updates the contents of a region of the vector.</div><div class="ttdef"><b>Definition</b> vector.hpp:363</div></div>
</div><!-- fragment --><p>Vectors can also be concatenated into a larger vector.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 8&gt;</a> v1;</div>
<div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 8&gt;</a> v2;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> v = <a class="code hl_function" href="group__group__init.html#ga75f2a7582895781f923158f40dbaed3c">aie::concat</a>(v1, v2);</div>
<div class="ttc" id="agroup__group__init_html_ga75f2a7582895781f923158f40dbaed3c"><div class="ttname"><a href="group__group__init.html#ga75f2a7582895781f923158f40dbaed3c">aie::concat</a></div><div class="ttdeci">auto concat(const Acc &amp;acc, const Accums &amp;...accums) -&gt; accum&lt; typename Acc::value_type, Acc::size() *(1+sizeof...(Accums))&gt;</div><div class="ttdoc">Concatenate the contents of all input accumulators into a larger accumulator.</div><div class="ttdef"><b>Definition</b> aie.hpp:1032</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md5"></a>
Accumulator Initialization</h3>
<p>Accumulators support all the aforementioned vector operations but the individual element update.</p>
<p>The contents of an accumulator are undefined when default constructed.</p>
<dl class="section warning"><dt>Warning</dt><dd>Reading an undefined input accumulator may not produce an error during compilation, but the operation may not behave as intended.</dd></dl>
<p>We can initialize an accumulator from the result of an operation. Some operations such as <a class="el" href="group__group__arithmetic.html#gac7ff4236ae3cbc544f118df14881ee4e" title="Returns an accumulator of the requested type with the element-wise multiplication of the two input ve...">aie::mul</a>, are able to deduce the <a class="el" href="group__group__arithmetic.html#DefaultAccumTag">optimal accumulator type from their input arguments</a>. When this is the case, it is not trivial for the developer to know what type each of the template parameters will be used in every situation, but we can let the compiler deduce them instead:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> a = ...</div>
<div class="line">aie::vector&lt;<a class="code hl_typedef" href="types_8hpp.html#a3271a6f688eb2ba4047a2982ff49919a">int32</a>, 16&gt; b = ...</div>
<div class="line">aie::accum result = <a class="code hl_function" href="group__group__arithmetic.html#gac7ff4236ae3cbc544f118df14881ee4e">aie::mul</a>(a, b);</div>
<div class="ttc" id="agroup__group__arithmetic_html_gac7ff4236ae3cbc544f118df14881ee4e"><div class="ttname"><a href="group__group__arithmetic.html#gac7ff4236ae3cbc544f118df14881ee4e">aie::mul</a></div><div class="ttdeci">constexpr auto mul(const Vec1 &amp;v1, const Vec2 &amp;v2) -&gt; accum&lt; AccumTag, Vec1::size()&gt;</div><div class="ttdoc">Returns an accumulator of the requested type with the element-wise multiplication of the two input ve...</div><div class="ttdef"><b>Definition</b> aie.hpp:4566</div></div>
<div class="ttc" id="atypes_8hpp_html_a3271a6f688eb2ba4047a2982ff49919a"><div class="ttname"><a href="types_8hpp.html#a3271a6f688eb2ba4047a2982ff49919a">int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition</b> types.hpp:22</div></div>
</div><!-- fragment --><p>If we need to retrieve any of the template parameters later on, it is possible to access them by means of class member typedefs:</p>
<div class="fragment"><div class="line"><span class="keyword">using </span>result_tag = <span class="keyword">decltype</span>(result)::value_type;</div>
<div class="line"><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> result_elems = result.size();</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6"></a>
Initialization by Stream Read</h3>
<p>Both vectors and accumulators can also be read from ADF abstractions such as windows and streams. See <a class="el" href="group__group__adf.html">Interoperability with Adaptive Data Flow (ADF) Graph Abstractions</a> for more details.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 8&gt;</a> v  = readincr_v&lt;8&gt;(input_stream);</div>
<div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::accum&lt;acc48, 8&gt;</a> acc = readincr_v&lt;8&gt;(input_cascade);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
Mask Initialization</h3>
<p>Masks are usually initialized as a result of a comparison using vectors:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::vector&lt;int16, 16&gt;</a> a, b;</div>
<div class="line"><a class="code hl_typedef" href="namespaceaie.html#a43a139787b463ec1b70e6d1e25621808">aie::mask&lt;16&gt;</a> m = <a class="code hl_function" href="group__group__compare.html#gaec5a853cd8690532b3b00e2e48e882fe">aie::lt</a>(a, b);</div>
<div class="ttc" id="agroup__group__compare_html_gaec5a853cd8690532b3b00e2e48e882fe"><div class="ttname"><a href="group__group__compare.html#gaec5a853cd8690532b3b00e2e48e882fe">aie::lt</a></div><div class="ttdeci">mask&lt; Vec1::size()&gt; lt(const Vec1 &amp;v1, const Vec2 &amp;v2)</div><div class="ttdoc">Compares the elements of the two input vectors and returns a mask that says what elements from the fi...</div><div class="ttdef"><b>Definition</b> aie.hpp:1339</div></div>
</div><!-- fragment --><p>In addition, it is possible to initialize a mask using a constant value. For example:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> m1 = <a class="code hl_function" href="group__group__basic__types.html#a651660bcabf73e73c1b1d856135816e1">aie::mask&lt;64&gt;::from_uint64</a>(0xaaaabbbbccccddddULL);</div>
<div class="line"><span class="keyword">auto</span> m2 = <a class="code hl_function" href="group__group__basic__types.html#ac7668c1751bd4b9238bd74db5415e705">aie::mask&lt;64&gt;::from_uint32</a>(0xaaaabbbb, 0xccccdddd);</div>
<div class="line"><span class="keyword">auto</span> m3 = <a class="code hl_function" href="group__group__basic__types.html#ac7668c1751bd4b9238bd74db5415e705">aie::mask&lt;16&gt;::from_uint32</a>(0b1010&#39;1010&#39;1011&#39;1011);</div>
<div class="ttc" id="agroup__group__basic__types_html_a651660bcabf73e73c1b1d856135816e1"><div class="ttname"><a href="group__group__basic__types.html#a651660bcabf73e73c1b1d856135816e1">aie::mask::from_uint64</a></div><div class="ttdeci">static constexpr mask&lt; Elems &gt; from_uint64(uint64_t w, T &amp;&amp;... words)</div><div class="ttdoc">Construct from unsigned (64b) words.</div><div class="ttdef"><b>Definition</b> mask.hpp:177</div></div>
<div class="ttc" id="agroup__group__basic__types_html_ac7668c1751bd4b9238bd74db5415e705"><div class="ttname"><a href="group__group__basic__types.html#ac7668c1751bd4b9238bd74db5415e705">aie::mask::from_uint32</a></div><div class="ttdeci">static constexpr mask&lt; Elems &gt; from_uint32(unsigned w, T &amp;&amp;... words)</div><div class="ttdoc">Construct from unsigned (32b) words.</div><div class="ttdef"><b>Definition</b> mask.hpp:157</div></div>
</div><!-- fragment --><dl class="section user"><dt>Tip:</dt><dd>You can use the standard C/C++ macros for fixed-sized integers instead of the integer suffix. In the definition of <code>m1</code> it would look like <code>UINT64_C(0xaaaabbbbccccdddd)</code>. </dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- SPDX-License-Identifier: MIT -->
<!-- Copyright (C) 2022 Xilinx, Inc. -->
<!-- Copyright (C) 2022-2024 Advanced Micro Devices, Inc. -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">UG1529 &copy; 2024 Advanced Micro Devices, Inc. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
